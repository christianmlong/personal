<!DOCTYPE html>
<html>
  <head>
    <title>Title</title>
    <meta charset="utf-8">
    <style>
      @import url(https://fonts.googleapis.com/css?family=Source+Sans+Pro);
      @import url(https://fonts.googleapis.com/css?family=Source+Code+Pro);
      @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body { font-family: 'source sans pro'; }
      h1, h2, h3 {
        font-family: 'source sans pro';
        font-weight: normal;
      }
      .remark-code, .remark-inline-code { font-family: 'source code pro'; }
    </style>
  </head>
  <body>
    <textarea id="source">

class: center, middle

# Pytest Fixtures

---

## Declare

```python
import pytest

@pytest.fixture
def smtp():
    import smtplib
    return smtplib.SMTP("smtp.gmail.com", 587)
```


---

## Declare

```python
import pytest

@pytest.fixture
def smtp():
    import smtplib
    return smtplib.SMTP("smtp.gmail.com", 587)
```

## Use

```python
def test_ehlo(smtp):
    response, msg = smtp.ehlo()
    assert response == 250
    assert 0 # for demo purposes
```

---

## Try it

```text
=============== test session starts ================
platform darwin -- Python 3.4.3 -- py-1.4.30 -- pytest-2.7.2
rootdir: /Users/chlong2, inifile:
collected 1 items

test.py F

===================== FAILURES =====================
____________________ test_ehlo _____________________

smtp = <smtplib.SMTP object at 0x10d51a438>

    def test_ehlo(smtp):
        response, msg = smtp.ehlo()
        assert response == 250
>       assert 0 # for demo purposes
E       assert 0

test.py:12: AssertionError
============= 1 failed in 1.19 seconds =============
```

---


## Declare

```python
import pytest

@pytest.fixture
def smtp():
    import smtplib
    return smtplib.SMTP("smtp.gmail.com", 587)
```

## Use

```python
def test_ehlo(smtp):
    response, msg = smtp.ehlo()
    assert response == 250
    assert 0 # for demo purposes
```

---


## Declare

```python
import pytest

@pytest.fixture
def smtp():
    import smtplib
    return smtplib.SMTP("smtp.gmail.com", 587)
```

## Use

```python
def test_ehlo(smtp):
    response, msg = smtp.ehlo()
    assert response == 250
```

---

## Try it again

```
================= test session starts =================
platform darwin -- Python 3.4.3 -- py-1.4.30 -- pytest-2.7.2
rootdir: /Users/chlong2, inifile:
collected 1 items

test.py .

============== 1 passed in 0.46 seconds ===============
```


---


## Declare

```python
import pytest

@pytest.fixture
def smtp():
    import smtplib
    return smtplib.SMTP("smtp.gmail.com", 587)
```

## Use

```python
def test_ehlo(smtp):
    response, msg = smtp.ehlo()
    assert response == 250
```





---


## Declare

```python
import pytest

@pytest.fixture
def smtp():
    import smtplib
    return smtplib.SMTP("smtp.gmail.com", 587)
```

## Use

```python
@pytest.mark.usefixtures('smtp')
def test_ehlo(smtp):
    response, msg = smtp.ehlo()
    assert response == 250
```


---

## More info

### http://pytest.org/latest/fixture.html








    </textarea>
    <script src="https://gnab.github.io/remark/downloads/remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create();
    </script>
  </body>
</html>
